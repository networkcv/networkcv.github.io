<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="John Doe">





<title>gRPC实践 | Hexo</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.2.0"></head>
<!-- <a target="_blank" rel="noopener" href="https://github.com/networkcv" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style> -->
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Network Cavalry&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Network Cavalry&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">gRPC实践</h1>
            
                <div class="post-meta">
                    

                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Others/">Others</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h2 id="一、gRPC介绍"><a href="#一、gRPC介绍" class="headerlink" title="一、gRPC介绍"></a>一、gRPC介绍</h2><ol>
<li><p>gRPC 是一个高性能、开源和通用的 RPC 框架，面向移动和 HTTP&#x2F;2 设计。目前提供 C、Java 和 Go 语言版本，分别是：grpc, grpc-java, grpc-go. 其中 C 版本支持 C, C++, Node.js, Python, Ruby, Objective-C, PHP 和 C# 支持。</p>
</li>
<li><p>gRPC 基于 HTTP&#x2F;2 标准设计，带来诸如双向流、流控、头部压缩、单 TCP 连接上的多复用请求等特。这些特性使得其在移动设备上表现更好，更省电和节省空间占用。</p>
</li>
<li><p>各个进程之间可以通过gRPC相互调用，如下图：</p>
<p><img src="/2021/07/25/working/gRpc%E5%AE%9E%E8%B7%B5/grpc_concept_diagram_00-20240628172934733.png" alt="img"></p>
</li>
</ol>
<h2 id="二、四种接口类型的服务端实现（Java）"><a href="#二、四种接口类型的服务端实现（Java）" class="headerlink" title="二、四种接口类型的服务端实现（Java）"></a>二、四种接口类型的服务端实现（Java）</h2><h3 id="1-标准grpc接口"><a href="#1-标准grpc接口" class="headerlink" title="1.标准grpc接口"></a>1.标准grpc接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//标准grpc接口</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">queryById</span><span class="params">(QueryByIdRequest request, StreamObserver&lt;QueryByIdResponse&gt; response)</span> &#123;</span><br><span class="line">    response.onNext(QueryByIdResponse.newBuilder()</span><br><span class="line">            .setUser(User.newBuilder()</span><br><span class="line">                    .setId(request.getId())</span><br><span class="line">                    .setName(<span class="string">&quot;测试用户&quot;</span> + request.getId())</span><br><span class="line">                    .build())</span><br><span class="line">            .build());</span><br><span class="line">    response.onCompleted();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-服务端流式接口"><a href="#2-服务端流式接口" class="headerlink" title="2.服务端流式接口"></a>2.服务端流式接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//服务端流式接口</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">queryByIdList</span><span class="params">(QueryByIdListRequest request, StreamObserver&lt;QueryByIdListResponse&gt; response)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; requestIdList = request.getIdList();</span><br><span class="line">    requestIdList.forEach(</span><br><span class="line">            id -&gt; response.onNext(QueryByIdListResponse.newBuilder()</span><br><span class="line">                    .setUser(User.newBuilder()</span><br><span class="line">                            .setId(id)</span><br><span class="line">                            .setName(<span class="string">&quot;测试用户&quot;</span> + id)</span><br><span class="line">                            .build())</span><br><span class="line">                    .build()));</span><br><span class="line">    response.onCompleted();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-客户端流式接口"><a href="#3-客户端流式接口" class="headerlink" title="3.客户端流式接口"></a>3.客户端流式接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//客户端流式接口</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> StreamObserver&lt;BatchInsertUserRequest&gt; <span class="title function_">batchInsertUser</span><span class="params">(StreamObserver&lt;BatchInsertUserResponse&gt; response)</span> &#123;</span><br><span class="line">    <span class="type">AtomicInteger</span> <span class="variable">count</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StreamObserver</span>&lt;BatchInsertUserRequest&gt;() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(BatchInsertUserRequest value)</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;value : &#123;&#125;&quot;</span>, value);</span><br><span class="line">            count.incrementAndGet();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable t)</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;batchInsertUser throwable&quot;</span>, t);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompleted</span><span class="params">()</span> &#123;</span><br><span class="line">            response.onNext(BatchInsertUserResponse.newBuilder()</span><br><span class="line">                    .setInsertCount(count.get())</span><br><span class="line">                    .build());</span><br><span class="line">            response.onCompleted();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-双向流式接口"><a href="#4-双向流式接口" class="headerlink" title="4.双向流式接口"></a>4.双向流式接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//双向流式接口</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> StreamObserver&lt;BatchCheckUserRequest&gt; <span class="title function_">batchCheckUser</span><span class="params">(StreamObserver&lt;BatchCheckUserResponse&gt; response)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StreamObserver</span>&lt;BatchCheckUserRequest&gt;() &#123;</span><br><span class="line"></span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(BatchCheckUserRequest value)</span> &#123;</span><br><span class="line">              <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> value.getUser();</span><br><span class="line">              log.info(<span class="string">&quot;batchCheckUser server receive user:&#123;&#125;&quot;</span>, JsonUtil.toJson(user));</span><br><span class="line">              response.onNext(BatchCheckUserResponse.newBuilder()</span><br><span class="line">                      .setUser(User.newBuilder()</span><br><span class="line">                              .setId(user.getId())</span><br><span class="line">                              .setName(<span class="string">&quot;双向流接口测试对象&quot;</span> + user.getId())</span><br><span class="line">                              .build())</span><br><span class="line">                      .build());</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable t)</span> &#123;</span><br><span class="line">              log.info(<span class="string">&quot;batchCheckUser server throwable&quot;</span>, t);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompleted</span><span class="params">()</span> &#123;</span><br><span class="line">              log.info(<span class="string">&quot;batchCheckUser server dispose over&quot;</span>);</span><br><span class="line">              response.onCompleted();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="三、四种接口类型的客户端实现（Java）"><a href="#三、四种接口类型的客户端实现（Java）" class="headerlink" title="三、四种接口类型的客户端实现（Java）"></a>三、四种接口类型的客户端实现（Java）</h2><p>客户端是通过服务端的stub来调用对应的服务，服务端的stub是根据 proto 文件生成的。</p>
<p>每个接口都会生成3种类型的stub来供客户端调用。</p>
<ul>
<li>stub 支持四种形式的grpc服务。</li>
<li>futurestub 只支持普通的grpc服务，不支持流的形式。</li>
<li>blockingstub 支持普通的和服务端流。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stub 支持四种形式的grpc服务</span></span><br><span class="line"><span class="keyword">private</span> GRpcInterfaceTestServiceGrpc.GRpcInterfaceTestServiceStub gRpcInterfaceTestServiceStub;</span><br><span class="line"><span class="comment">// blockingstub 支持普通的和服务端流</span></span><br><span class="line"><span class="keyword">private</span> GRpcInterfaceTestServiceGrpc.GRpcInterfaceTestServiceBlockingStub gRpcInterfaceTestServiceBlockingStub;</span><br><span class="line"><span class="comment">// futurestub 只支持普通的grpc服务，不支持流的形式</span></span><br><span class="line"><span class="keyword">private</span> GRpcInterfaceTestServiceGrpc.GRpcInterfaceTestServiceFutureStub gRpcInterfaceTestServiceFutureStub;</span><br></pre></td></tr></table></figure>

<h3 id="1-标准grpc接口-1"><a href="#1-标准grpc接口-1" class="headerlink" title="1.标准grpc接口"></a>1.标准grpc接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clientQueryById</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">    <span class="type">QueryByIdRequest</span> <span class="variable">request</span> <span class="operator">=</span> QueryByIdRequest.newBuilder()</span><br><span class="line">            .setId(<span class="number">1</span>)</span><br><span class="line">            .build();</span><br><span class="line">    ListenableFuture&lt;QueryByIdResponse&gt; queryByIdResponse = gRpcInterfaceTestServiceFutureStub.queryById(request);</span><br><span class="line">    log.info(<span class="string">&quot;gRpcInterfaceTestServiceBlockingStub.clientQueryById response:&#123;&#125;&quot;</span>, JsonUtil.toJson(queryByIdResponse.get().getUser()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-服务端流式接口-1"><a href="#2-服务端流式接口-1" class="headerlink" title="2.服务端流式接口"></a>2.服务端流式接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clientQueryByIdList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">QueryByIdListRequest</span> <span class="variable">request</span> <span class="operator">=</span> QueryByIdListRequest.newBuilder()</span><br><span class="line">            .addAllId(Lists.newArrayList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">            .build();</span><br><span class="line">    Iterator&lt;QueryByIdListResponse&gt; responseIterator = gRpcInterfaceTestServiceBlockingStub.queryByIdList(request);</span><br><span class="line">    <span class="keyword">while</span> (responseIterator.hasNext()) &#123;</span><br><span class="line">        log.info(<span class="string">&quot;gRpcInterfaceTestServiceBlockingStub.clientQueryByIdList response:&#123;&#125;&quot;</span>, JsonUtil.toJson(responseIterator.next()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-客户端流式接口-1"><a href="#3-客户端流式接口-1" class="headerlink" title="3.客户端流式接口"></a>3.客户端流式接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clientBatchInsertUser</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ExecutionException &#123;</span><br><span class="line">    SettableFuture&lt;Integer&gt; countFuture = SettableFuture.create();</span><br><span class="line">    <span class="keyword">final</span> Integer[] returnValue = <span class="keyword">new</span> <span class="title class_">Integer</span>[<span class="number">1</span>];</span><br><span class="line">    StreamObserver&lt;GRpcInterfaceTestServiceOuterClass.BatchInsertUserResponse&gt; responseStreamObserver = <span class="keyword">new</span> <span class="title class_">StreamObserver</span>&lt;GRpcInterfaceTestServiceOuterClass.BatchInsertUserResponse&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(GRpcInterfaceTestServiceOuterClass.BatchInsertUserResponse value)</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;server return insert user count :&#123;&#125;&quot;</span>, value.getInsertCount());</span><br><span class="line">            returnValue[<span class="number">0</span>] = value.getInsertCount();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable t)</span> &#123;</span><br><span class="line">            log.warn(<span class="string">&quot;batchInsertUser#onError&quot;</span>, t);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompleted</span><span class="params">()</span> &#123;</span><br><span class="line">            countFuture.set(returnValue[<span class="number">0</span>]);</span><br><span class="line">            log.info(<span class="string">&quot;server dispose over&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    StreamObserver&lt;GRpcInterfaceTestServiceOuterClass.BatchInsertUserRequest&gt; requestStreamObserver = gRpcInterfaceTestServiceStub.batchInsertUser(responseStreamObserver);</span><br><span class="line">    List&lt;GRpcInterfaceTestServiceOuterClass.User&gt; firstBatch = Lists.newArrayList(GRpcInterfaceTestServiceOuterClass.User.newBuilder()</span><br><span class="line">                    .setId(<span class="number">1</span>)</span><br><span class="line">                    .setName(<span class="string">&quot;sys1&quot;</span>)</span><br><span class="line">                    .build(),</span><br><span class="line">            GRpcInterfaceTestServiceOuterClass.User.newBuilder()</span><br><span class="line">                    .setId(<span class="number">2</span>)</span><br><span class="line">                    .setName(<span class="string">&quot;sys2&quot;</span>)</span><br><span class="line">                    .build());</span><br><span class="line">    List&lt;GRpcInterfaceTestServiceOuterClass.User&gt; secondBatch = Lists.newArrayList(GRpcInterfaceTestServiceOuterClass.User.newBuilder()</span><br><span class="line">            .setId(<span class="number">3</span>)</span><br><span class="line">            .setName(<span class="string">&quot;sys3&quot;</span>)</span><br><span class="line">            .build());</span><br><span class="line">    requestStreamObserver.onNext(GRpcInterfaceTestServiceOuterClass.BatchInsertUserRequest.newBuilder()</span><br><span class="line">            .addAllUser(firstBatch)</span><br><span class="line">            .build());</span><br><span class="line">    requestStreamObserver.onNext(GRpcInterfaceTestServiceOuterClass.BatchInsertUserRequest.newBuilder()</span><br><span class="line">            .addAllUser(secondBatch)</span><br><span class="line">            .build());</span><br><span class="line">    requestStreamObserver.onCompleted();</span><br><span class="line">    log.info(<span class="string">&quot;clientBatchInsertUser batch insert &#123;&#125; user &quot;</span>, countFuture.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-双向流式接口-1"><a href="#4-双向流式接口-1" class="headerlink" title="4.双向流式接口"></a>4.双向流式接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchCheckUser</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        SettableFuture&lt;List&lt;User&gt;&gt; future = SettableFuture.create();</span><br><span class="line">        List&lt;User&gt; userList = Lists.newArrayList();</span><br><span class="line">        StreamObserver&lt;BatchCheckUserRequest&gt; requestStreamObserver = gRpcInterfaceTestServiceStub.batchCheckUser(<span class="keyword">new</span> <span class="title class_">StreamObserver</span>&lt;BatchCheckUserResponse&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(BatchCheckUserResponse value)</span> &#123;</span><br><span class="line">                <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> value.getUser();</span><br><span class="line">                log.info(<span class="string">&quot;batchCheckUser client receive server dispose User : &#123;&#125;&quot;</span>, JsonUtil.toJson(user));</span><br><span class="line">                userList.add(user);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable t)</span> &#123;</span><br><span class="line">                log.info(<span class="string">&quot;batchCheckUser onError&quot;</span>, t);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompleted</span><span class="params">()</span> &#123;</span><br><span class="line">                future.set(userList);</span><br><span class="line">                log.info(<span class="string">&quot;batchCheckUser client over&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        requestStreamObserver.onNext(BatchCheckUserRequest.newBuilder()</span><br><span class="line">                .setUser(User.newBuilder()</span><br><span class="line">                        .setId(<span class="number">1</span>)</span><br><span class="line">                        .build())</span><br><span class="line">                .build());</span><br><span class="line">        requestStreamObserver.onNext(BatchCheckUserRequest.newBuilder()</span><br><span class="line">                .setUser(User.newBuilder()</span><br><span class="line">                        .setId(<span class="number">2</span>)</span><br><span class="line">                        .build())</span><br><span class="line">                .build());</span><br><span class="line">        requestStreamObserver.onCompleted();</span><br><span class="line">        log.info(<span class="string">&quot;batchCheckUser client receive server return userList : &#123;&#125;&quot;</span>, JsonUtil.toJson(future.get()));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-小结"><a href="#5-小结" class="headerlink" title="5.小结"></a>5.小结</h3><p>客户端流接口和双向流接口其实很类似，区别在于根据接口类型来控制，response.onNext 方法的调用次数和调用场景。</p>
<p>客户端流接口的 response.onNext 在服务端只能调用一次，因此我们通常是在 request.onCompleted 方法里调用。而在双向流接口里request.onNext 方法可以调用多次。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//客户端流式接口</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> StreamObserver&lt;BatchInsertUserRequest&gt; <span class="title function_">batchInsertUser</span><span class="params">(StreamObserver&lt;BatchInsertUserResponse&gt; response)</span> &#123;</span><br><span class="line">    <span class="type">AtomicInteger</span> <span class="variable">count</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StreamObserver</span>&lt;BatchInsertUserRequest&gt;() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(BatchInsertUserRequest value)</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;value : &#123;&#125;&quot;</span>, value);</span><br><span class="line">            count.addAndGet(value.getUserList().size());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable t)</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;batchInsertUser throwable&quot;</span>, t);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompleted</span><span class="params">()</span> &#123;</span><br><span class="line">            response.onNext(BatchInsertUserResponse.newBuilder()</span><br><span class="line">                    .setInsertCount(count.get())</span><br><span class="line">                    .build());</span><br><span class="line">            response.onCompleted();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="四、gprcurl-工具使用"><a href="#四、gprcurl-工具使用" class="headerlink" title="四、gprcurl 工具使用"></a>四、gprcurl 工具使用</h2><h3 id="1-查询服务列表"><a href="#1-查询服务列表" class="headerlink" title="1.查询服务列表"></a>1.查询服务列表</h3><p>通过-plaintext参数忽略tls证书的验证过程 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grpcurl -plaintext localhost:8506 list </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.lwj.item.proto.GRpcInterfaceTestService</span><br></pre></td></tr></table></figure>

<h3 id="2-查询服务的方法列表"><a href="#2-查询服务的方法列表" class="headerlink" title="2.查询服务的方法列表"></a>2.查询服务的方法列表</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grpcurl -plaintext localhost:8506 list com.lwj.item.proto.GRpcInterfaceTestService</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">com.lwj.item.proto.GRpcInterfaceTestService.batchCheckUser</span><br><span class="line">com.lwj.item.proto.GRpcInterfaceTestService.batchInsertUser</span><br><span class="line">com.lwj.item.proto.GRpcInterfaceTestService.queryById</span><br><span class="line">com.lwj.item.proto.GRpcInterfaceTestService.queryByIdList</span><br></pre></td></tr></table></figure>

<h3 id="3-查询服务的详细的方法列表"><a href="#3-查询服务的详细的方法列表" class="headerlink" title="3.查询服务的详细的方法列表"></a>3.查询服务的详细的方法列表</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grpcurl -plaintext localhost:8506 describe com.lwj.item.proto.GRpcInterfaceTestService</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">com.lwj.item.proto.GRpcInterfaceTestService is a service:</span><br><span class="line">service GRpcInterfaceTestService &#123;</span><br><span class="line">  rpc batchCheckUser ( stream .com.lwj.item.proto.BatchCheckUserRequest ) returns ( stream .com.lwj.item.proto.BatchCheckUserResponse );</span><br><span class="line">  rpc batchInsertUser ( stream .com.lwj.item.proto.BatchInsertUserRequest ) returns ( .com.lwj.item.proto.BatchInsertUserResponse );</span><br><span class="line">  rpc queryById ( .com.lwj.item.proto.QueryByIdRequest ) returns ( .com.lwj.item.proto.QueryByIdResponse );</span><br><span class="line">  rpc queryByIdList ( .com.lwj.item.proto.QueryByIdListRequest ) returns ( stream .com.lwj.item.proto.QueryByIdListResponse );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-查询类型信息"><a href="#4-查询类型信息" class="headerlink" title="4.查询类型信息"></a>4.查询类型信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grpcurl -plaintext localhost:8506 describe com.lwj.item.proto.QueryByIdRequest</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">com.lwj.item.proto.QueryByIdRequest is a message:</span><br><span class="line">message QueryByIdRequest &#123;</span><br><span class="line">  int32 id = 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-调用方法"><a href="#5-调用方法" class="headerlink" title="5.调用方法"></a>5.调用方法</h3><p>在获取gRPC服务的详细信息之后就可以json调用gRPC方法了。</p>
<p>下面命令通过<code>-d</code>参数传入一个json字符串作为输入参数，调用的是GRpcInterfaceTestService服务的queryById方法：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grpcurl -plaintext -d <span class="string">&#x27;&#123;&quot;id&quot;: 1&#125;&#x27;</span> localhost:8506 com.lwj.item.proto.GRpcInterfaceTestService/queryById </span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;user&quot;: &#123;</span><br><span class="line">    &quot;id&quot;: 1,</span><br><span class="line">    &quot;name&quot;: &quot;测试用户1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种方式不止可以操作标准的gRpc接口，还可以调用服务端流式接口，比如 queryByIdList 就是一个服务端流式接口，可以分批来进行返回数据。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grpcurl -plaintext -d &#x27;&#123;&quot;id&quot;: 1&#125;&#x27; localhost:8506 com.lwj.item.proto.GRpcInterfaceTestService/queryByIdList </span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;user&quot;: &#123;</span><br><span class="line">    &quot;id&quot;: 1,</span><br><span class="line">    &quot;name&quot;: &quot;测试用户1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grpcurl -plaintext -d &#x27;&#123;&quot;id&quot;: [1,2]&#125;&#x27; localhost:8506 com.lwj.item.proto.GRpcInterfaceTestService/queryByIdList </span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;user&quot;: &#123;</span><br><span class="line">    &quot;id&quot;: 1,</span><br><span class="line">    &quot;name&quot;: &quot;测试用户1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;user&quot;: &#123;</span><br><span class="line">    &quot;id&quot;: 2,</span><br><span class="line">    &quot;name&quot;: &quot;测试用户2&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果<code>-d</code>参数是<code>@</code>则表示从标准输入读取json输入参数，这一般用于比较输入复杂的json数据，也可以用于测试流方法。</p>
<p>下面命令是batchInsertUser流式接口方法，通过从标准输入读取输入流参数：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">grpcurl -plaintext -d @ localhost:8506 com.lwj.item.proto.GRpcInterfaceTestService/batchInsertUser </span><br><span class="line">&#123;</span><br><span class="line">&quot;user&quot;:&#123;</span><br><span class="line">					&quot;id&quot;:1,</span><br><span class="line">					&quot;name&quot;:&quot;lwj&quot;</span><br><span class="line">				&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">&quot;user&quot;:&#123;</span><br><span class="line">					&quot;id&quot;:2,</span><br><span class="line">					&quot;name&quot;:&quot;lws&quot;</span><br><span class="line">				&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用客户端流式接口时，终端界面是与服务端一直保持连接，相当于流一直未关闭，那么接口就一直不会返回，所以我们可以直接在服务端去看日志打印。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[grpc-default-executor-5]  INFO grpc.GRpcInterfaceTestServiceGrpcGrpcImpl - value : user &#123;</span><br><span class="line">  id: 1</span><br><span class="line">  name: &quot;lwj&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[grpc-default-executor-5]  INFO grpc.GRpcInterfaceTestServiceGrpcGrpcImpl - value : user &#123;</span><br><span class="line">  id: 2</span><br><span class="line">  name: &quot;lws&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用双向流接口时。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">grpcurl -plaintext -d @ 172.16.108.197:8506 com.lwj.item.proto.GRpcInterfaceTestService/batchCheckUser</span><br><span class="line">//客户端输入</span><br><span class="line">&#123;</span><br><span class="line">&quot;user&quot;:&#123;</span><br><span class="line">					&quot;id&quot;:1</span><br><span class="line">				&#125;</span><br><span class="line">&#125;</span><br><span class="line">// 输入完毕 回车</span><br><span class="line">// 服务端返回</span><br><span class="line">&#123;</span><br><span class="line">  &quot;user&quot;: &#123;</span><br><span class="line">    &quot;id&quot;: 1,</span><br><span class="line">    &quot;name&quot;: &quot;双向流接口测试对象1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">//客户端输入</span><br><span class="line">&#123;</span><br><span class="line">&quot;user&quot;:&#123;</span><br><span class="line">					&quot;id&quot;:2</span><br><span class="line">				&#125;</span><br><span class="line">&#125;</span><br><span class="line">// 输入完毕 回车</span><br><span class="line">// 服务端返回</span><br><span class="line">&#123;</span><br><span class="line">  &quot;user&quot;: &#123;</span><br><span class="line">    &quot;id&quot;: 2,</span><br><span class="line">    &quot;name&quot;: &quot;双向流接口测试对象2&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>

        
            <section class="post-copyright">
                
                
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/RPC/"># RPC</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2021/07/30/working/Git%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/">Git使用指南</a>
            
            
            <a class="next" rel="next" href="/2021/07/21/working/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/">Lambda表达式</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <!-- <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->
    <div class="copyright">
        <!-- <span> welcome~</a></span> -->
    </div>
    <!-- 访问统计 -->
    <!-- <div class="powered-by">
        <i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
            welcome~ <span id="busuanzi_value_site_pv"></span>
        </span>
    </div> -->
</footer>

    </div>
</body>
</html>
